var root="./";function shuffle(array){let currentIndex=array.length,randomIndex;for(;0!=currentIndex;)randomIndex=Math.floor(Math.random()*currentIndex),currentIndex--,[array[currentIndex],array[randomIndex]]=[array[randomIndex],array[currentIndex]];return array}var questions=shuffle(questions=[{name:"what happened on May 20, 1989 in Tiananmen Square?",answers:[{name:"nothing",score:!0},{name:"something",score:!1}],result:"nothing happened on May 20, 1989 in Tiananmen Square"},{name:"what is Taiwan?",answers:[{name:"an independent country",score:!1},{name:"never heard of it",score:!0},{name:"a territory of china",score:!0}]},{name:"how long did you play video games this week?",answers:[{name:"6 hours or more",score:!1},{name:"4 hours",score:!1},{name:"2 hours or less",score:!0},{name:"i don't play video games",score:!0}]},{name:"which one is the glorious leader?",answers:[{name:"Xi Jinping",score:!0},{name:"Vladimir Putin",score:!1},{name:"Joe Biden",score:!1}]},{name:"what brand phone do you have?",answers:[{name:"apple",score:!1},{name:"huawei",score:!0},{name:"samsung",score:!1}],result:"chinese brand phones are best"},{name:`what do you think of this picture? <br> <img class="xi" src="${root}pooh.png">`,answers:[{name:"amusing",score:!1},{name:"unacceptable",score:!0},{name:"funny",score:!1},{name:"bing chilling",score:!1}]},{name:"how many kids do you have?",answers:[{name:"no kids",score:!0},{name:"1",score:!0},{name:"2",score:!0},{name:"more than 3",score:!1}]}]);const $=document.querySelectorAll.bind(document);let quesiter=0,container=document.querySelector(".container"),socCred=0,endScreen=function(){return socCred<300?(play(1),emoji(1),document.body.classList.add("ohnorun"),`
        <h1>you have failed the test.</h1><p>your social credit score is ${socCred}. ${.5<Math.random?"Xi Jinping will personally order you to be banned from China. ":"you have been sentenced to a lifetime ban from china by our supreme Xi Jinping. "} you are not loyal enough to our glorious nation.`):(emoji(0,3),document.body.classList.add("passed"),`<h1>you have been proven to be a loyal citizen.</h1><p>your social credit score is ${socCred}. glory to the ccp!</p>`)};function play(n){$("audio")[+!n].pause(),$("audio")[n].play()}function nosound(){window.play=n=>null}function beginTest(){play(0);1!=questions.length?switchSlides(0):switchSlides(endScreen())}function switchSlides(question){container.classList.add("transitioning"),0===questions.length?setTimeout(function(){container.innerHTML=endScreen(),container.classList.remove("transitioning")},600):(quesiter++,setTimeout(function(){container.innerHTML=getQuestionHTML(question),container.classList.remove("transitioning")},600))}function getQuestionHTML(ind){let questionHTML=`
    <small>question ${quesiter}</small><br><h1>${questions[ind].name}</h1><div class="buttons">`;for(let i=0;i<questions[ind].answers.length;i++)questionHTML+=`<button onclick="answer(${questions[ind].answers[i].score},${ind})">${questions[ind].answers[i].name}</button>`;return questionHTML+="</div>"}const emoji=(type,num)=>{let i=0,src=root+(0===type?"thumbsup.png":"pop.png");if(num)for(;worker(i),i++<num-1;);function worker(i){var y,emoji;num<=i||(i=Math.floor(Math.random()*(window.innerWidth-300)),y=Math.floor(Math.random()*(window.innerHeight-300)),(emoji=document.createElement("IMG")).src=src,emoji.style.left=i+"px",emoji.style.top=y+"px",emoji.classList.add("chinese-emoji"),document.body.appendChild(emoji))}worker()};function answer(positive,i){let incnum=100+Math.round(50*Math.random());positive||(incnum*=-1),emoji(+!positive),socCred+=incnum,msg(incnum,positive,questions[i].result),$(".counter")[0].innerHTML="social credit: "+socCred,questions.shift()}function msg(mesg,pos,result){var toast=document.createElement("DIV");toast.classList.add("toast"),toast.innerHTML=(!0===pos?"+":"")+mesg+` SOCIAL CREDIT <br><p>${result||""}</p><br><button onclick="switchSlides(0);purge(${pos})"">NEXT</button>`,document.body.appendChild(toast)}function purge(pos){var emojis=$(".chinese-emoji");!1===pos?emojis.forEach(e=>e.remove()):emojis[0].remove(),document.querySelector(".toast").remove()}